# Важная Информация ASP.NET

**Инфа 1:**

*Глобальный cath*

- Вариант 1:

```
AppDomain.CurrentDomain.FirstChanceException
```

*Является событием, которое возникает, когда возникает первое исключение в приложении в определенном домене приложения (AppDomain).*

*Это событие позволяет обрабатывать исключения до того, как они будут переданы на уровень выше (например, глобальный обработчик исключений). Использование FirstChanceException может быть полезным для отладки и логирования исключений, а также для принятия нужных мер в случае их возникновения.*

*Например, вы можете зарегистрировать обработчик события FirstChanceException, чтобы сохранить информацию об исключении в журнале или отправить уведомление администратору. Это позволит вам более подробно изучить и понять причины возникновения исключений и быстрее реагировать на них.*

*Вот примеры кода, показывающие использование FirstChanceException :*

```C#
AppDomain.CurrentDomain.FirstChanceException += (sender, eventArgs) =>
{
    // Логирование или дополнительная обработка исключения
    Console.WriteLine($"Перехвачено первое исключение: {eventArgs.Exception}");
};

// Ваш код приложения
// ...
```

*Обратите внимание, что обработчик FirstChanceException должен быть зарегистрирован перед возникновением исключений в вашем коде, чтобы иметь возможность перехватить их.*

*Код предоставленный от GB :*

```C#
AppDomain.CurrentDomain.FirstChangeException += CurrentDomain_FirstChangeExeption;

public static void CurrentDomain_FirstChangeExeption(object? sender, System.Runtime.ExeptionService.FirstChanceExceptionEventArgs e)
{
    Сonsole.WriteLine(e.Exception);
}

```

- Вариант 2:
```
AppDomain.CurrentDomain.UnhandledException
```
*В C# веб-разработке, AppDomain.CurrentDomain.UnhandledException является событием, которое возникает, когда необработанное исключение возникает в приложении в определенном домене приложения (AppDomain).*

*Это событие предоставляет возможность обработать исключение, которое не было обработано на уровне, где оно возникло. Данное событие полезно для определения и логирования исключений, которые могли появиться в вашем веб-приложении, но которые не были перехвачены локальными обработчиками исключений.*

*При возникновении необработанного исключения в веб-приложении, обработчик события UnhandledException может быть использован для выполнения дополнительной обработки, такой как логирование ошибки, отправка уведомления администратору или выполнение других операций по очистке ресурсов перед завершением приложения.*

*Вот пример кода, демонстрирующий использование UnhandledException :*

```C#
AppDomain.CurrentDomain.FirstChangeException += CurrentDomain_FirstChangeExeption;

AppDomain.CurrentDomain.UnhandledException += (sender, eventArgs) =>
{
    // Логирование или дополнительная обработка необработанного исключения
    var exception = (Exception)eventArgs.ExceptionObject;
    Console.WriteLine($"Необработанное исключение: {exception}");
};

// Ваш код приложения
// ...

```
*Обратите внимание, что событие UnhandledException является последней точкой остановки в обработке исключений и его использование должно быть осторожным. Обычно рекомендуется обрабатывать исключения на более низких уровнях и в местах, где вы можете принять конкретные меры по восстановлению или обработке ошибок без завершения всего приложения.*

*Код предоставленный от GB :*
```C#
AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;

public static void CurrentDomain_UnhandledException(object? sender, System.Runtime.ExeptionService.UnhandledExceptionEventArgs e)
{
    Сonsole.WriteLine(e.ExceptionObject);
}

```
- Разница между UnhandledException и FirstChangeExeption:

*AppDomain.CurrentDomain.UnhandledException и AppDomain.CurrentDomain.FirstChanceException являются двумя разными событиями в C#.*

*AppDomain.CurrentDomain.FirstChanceException :*

* Событие FirstChanceException возникает в момент, когда исключение возникает в приложении в определенном домене приложения (AppDomain), перед его обработкой обработчиком исключений.
* Это событие дает возможность перехватить и проанализировать исключение до обработки другими обработчиками исключений, исключая его повторную генерацию.
* Обычно FirstChanceException используется для трассировки и отладки, чтобы отследить все исключения, возникающие в приложении, независимо от того, были они обработаны или нет.

*AppDomain.CurrentDomain.UnhandledException :*

* Событие UnhandledException возникает, когда исключение не было обработано на уровне, где оно возникло, и проходит через все стандартные обработчики исключений без перехвата.
* Это событие позволяет ловить все необработанные исключения и выполнить дополнительную обработку перед завершением приложения.
* Обычно UnhandledException используется для логирования, отправки уведомлений администратору или выполнения операций по очистке ресурсов перед завершением приложения.

*Выбор между этими событиями зависит от ваших конкретных потребностей. Если вам нужно проводить дополнительную обработку или логирование для необработанных исключений, вы должны использовать UnhandledException. А если вам нужно выполнить отладочные операции или отследить все исключения в приложении, вы можете использовать FirstChanceException.*


*A так же ссылка на другую реализацию глобальной обработки исключений в ASP.NET Core приложении:*
 [habr.com](https://habr.com/ru/companies/otus/articles/543390/)


